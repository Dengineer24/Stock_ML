<!DOCTYPE html>
<html lang="en" style="background-color: #333333;">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>graph</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>
<body>

<figure class="highcharts-figure">
  <div id="container"></div>
</figure>
<script>
   var data = fetch($.get('/data'))
   console.log(data)
  
    Highcharts.chart('container', {
    chart: {
      type: 'spline',
      event: {
        load: data
      }
    },
    title: {
      text: 'Atmosphere Temperature by Altitude'
    },
    subtitle: {
      text: 'According to the Standard Atmosphere Model'
    },
    xAxis: {
      reversed: false,
      title: {
        enabled: true,
        text: 'Altitude'
      },
      labels: {
        format: '{value} km'
      },
      accessibility: {
        rangeDescription: 'Range: 0 to 80 km.'
      },
      maxPadding: 0.05,
      showLastLabel: true
    },
    yAxis: {
      title: {
        text: 'Temperature'
      },
      labels: {
        format: '{value}째'
      },
      accessibility: {
        rangeDescription: 'Range: -90째C to 20째C.'
      },
      lineWidth: 2
    },
    legend: {
      enabled: false
    },
    tooltip: {
      headerFormat: '<b>{series.name}</b><br/>',
      pointFormat: '{point.x} km: {point.y}째C'
    },
    plotOptions: {
      spline: {
        marker: {
          enable: false
        }
      }
    },
    series: [{
      name: 'Temperature',
      data: requestData.requests
    }]
  });
  </script>
</body>
</html>